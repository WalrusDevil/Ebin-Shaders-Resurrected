<!DOCTYPE html>

<html class="h-100">
  <head>
    <title>Ebin Resurrected</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="icon" type="image/x-icon" href="./ebin-icon.jpg">
  </head>

  <body onload="init()" class="bg-dark text-light h-100" style="overflow: hidden;">
    <div class="container text-center h-100">
      <div class="row align-items-center h-100">
        <div class="col-md">
          <div id="image-carousel" class="carousel slide" data-bs-ride="carousel">
            <div id="image-carousel-inner" class="carousel-inner rounded">
              <div id="placeholder-carousel-image" class="carousel-item active">
                <img src="https://cdn.modrinth.com/data/VP9picRm/images/241479a8193da71feb22fab482e180eadd9aa4d7.png" class="d-block w-100">
              </div>
            </div>
          </div>
        </div>
        <div class="col-md">
          <h1 class="h1 fw-bold">Ebin Resurrected</h1>
          <h2>A vibrant and performant Minecraft shaderpack.</h2>
          <a href="https://modrinth.com/shader/ebin-resurrected/version/latest" class="btn btn-primary btn-lg mb-3"><i class="bi bi-download"></i> Download <span id="download-count" style="display: none" class="badge text-bg-light"></span></a><br>
          <p id="version" style="display: none">Latest version: <span id="version-number" class="badge text-bg-info font-monospace">latest</span> released <span id="version-date" class="badge text-bg-info"></span></p>
          <p>By downloading Ebin Resurrected, you agree to the <a class="link-light" href="https://github.com/jbritain/Ebin-Shaders-Resurrected/blob/master/LICENSE.md">license</a>.</p>
        </div>
      </div>
      <footer class="position-absolute bottom-0 p-4 font-monospace">
        <a class="link-light" href="https://discord.gg/b9SHNcvs6c">discord</a>
        <span>•</span>
        <a class="link-light" href="https://jbritain.net">website</a>
        <span>•</span>
        <a class="link-light" href="https://github.com/jbritain/Ebin-Shaders-Resurrected/">github</a>
        <span>•</span>
        <a class="link-light" href="https://ko-fi.com/jbritain">support me</a>
      </footer>
    </div>
    <script>
      async function init(){
        const project_id="VP9picRm"

        await fetch(`https://api.modrinth.com/v2/project/${project_id}`).then(raw => {
          raw.json().then(project => {
            let downloadCounter = document.getElementById("download-count")
            downloadCounter.innerText = project.downloads;
            downloadCounter.style.display = null;
            
            let carousel = document.getElementById("image-carousel-inner");
            project.gallery.forEach((image, i) => {
              if(image.featured){
                return;
              }

              let newDiv = document.createElement("div");
              newDiv.classList.add("carousel-item");
              if(i == 0){
                newDiv.classList.add("active");
              }

              let newImg = document.createElement("img");
              newImg.src = image.url;
              newImg.classList.add("d-block", "w-100");

              newDiv.appendChild(newImg);
              if (i == 0){
                document.getElementById("placeholder-carousel-image").remove();
              }
              carousel.appendChild(newDiv);
            });
          })
        });
        await fetch(`https://api.modrinth.com/v2/project/${project_id}/version`).then(raw => {
          raw.json().then(versions => {
            let latest = versions.find(version => version.featured);

            let versionNumber = document.getElementById("version-number");
            versionNumber.innerText = latest.version_number;

            let versionDate = document.getElementById("version-date");
            let date = new Date(latest.date_published);
            versionDate.innerText = date.toDateString();

            document.getElementById("version").style.display = null;
          })
        })
        
      }
    </script>
  </body>
</html>
